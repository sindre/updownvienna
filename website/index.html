<!DOCTYPE html>
<html lang="de" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#" xmlns:fb="https://www.facebook.com/2008/fbml" manifest='manifest.appcache'>
<head><meta charset="utf-8"><title>UpDownVienna</title>
<meta property="og:title" content="Up Down Vienna" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.updownvienna.com/" />
<meta property="og:description" content="Aufzugsstörungen im Netz der Wiener Linien" />
<meta property="og:locality" content="Vienna" />
<meta property="og:country-name" content="Austria" />
<meta property="og:email" content="mail@sindre.at" />
<meta property="og:image" content="assets/content/app/144.png" />
<meta name="author" content="Sindre Wimberger, www.sindre.at" />
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320"/>
<meta http-equiv="cleartype" content="on">
<link rel="shortcut icon" href="favicon.ico" />
<link rel="image_src" href="assets/content/app/58.png" />
<link rel="apple-touch-icon" href="assets/content/app/58.png" />
<link rel="apple-touch-icon" sizes="72x72" href="assets/content/app/72.png" />
<link rel="apple-touch-icon" sizes="114x114" href="assets/content/app/114.png" />
<link rel="apple-touch-icon" sizes="144x144" href="assets/content/app/144.png" />
<meta name="msapplication-TileImage" content="img/144.png" />
<meta name="msapplication-TileColor" content="#ffffff" />
<meta name="viewport" content="width=device-width, init-scale=1" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />
<link href='http://fonts.googleapis.com/css?family=Ubuntu:400,700' rel='stylesheet' type='text/css' /> 
<style> 
html {overflow-x:hidden;-webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%;}
html, body {font-size:14px;font-family:'Ubuntu', Arial, Helvetica, sans-serif;margin:0;padding:0;}
body {padding:10px;}
h1 {margin:0; text-transform: uppercase; text-align: center;}
p {color:#9E9E9E;margin:.44em 0;text-align: center;}
.info{margin:.2em 0 1em;}
.skip {list-style:none;padding:0;margin:0 0 1em; text-align: center;}
.skip li {display:inline-block;width:48%;margin:0 1%; text-align: center;}
.skip a {color:#333;display:block;padding:.5em .3em; text-decoration: none;}
.skip li.error { background-color:#e61e29; }
.skip li.error a {color:#fff;}
.skip li.news {background-color:#FFC600;}
#container {margin:0 -10px;}
.list {list-style:none;overflow:hidden;padding:0;margin:0;}
.list li {background-color:#F3F3F3;border-left:10px solid;margin:.45em 0;min-height:2.9em;padding:.3em 10px .3em 50px; position:relative; }
.list li.error {border-color:#e61e29;}
.list li.news {border-color:#FFC600;}
.list li.loading {background-color:transparent;min-height:.5em;border-left:0 none;padding:1em;text-align: center;}
.list li.loading img {display: inline-block;vertical-align: middle;}
.list img.status {left:10px;position:absolute;top:12px;}
.list img.linie {left:5px;position:absolute;top:5px;width:40px;}
.list .lines2 img.linie {left:38px;position:absolute;top:8px;width:15px;}
.list .lines2 img.linie2 {left:38px;position:absolute;top:24px;width:15px;}
.list .lines3 {min-height:48px;}
.list .lines3 img.linie {left:38px;position:absolute;top:8px;width:15px;}
.list .lines3 img.linie2 {left:38px;position:absolute;top:24px;width:15px;}
.list .lines3 img.linie3 {left:38px;position:absolute;top:40px;width:15px;}

/*.list li.news, .list li.error {
    opacity: 0;
    position: relative;
    -webkit-animation: fadeIn 600ms ease both;
    -webkit-animation-play-state: paused;
    -moz-animation: fadeIn 600ms ease both;
    -moz-animation-play-state: paused;
    -o-animation: fadeIn 600ms ease both;
    -o-animation-play-state: paused;
    animation: fadeIn 600ms ease both;
    animation-play-state: paused;
}

.list.play li.news, .list.play li.error {
    -webkit-animation-play-state: running;
    -moz-animation-play-state: running;
    -o-animation-play-state: running;
    animation-play-state: running;
}

@-webkit-keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
}

@-moz-keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
}

@-o-keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
}

@keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
}
*/

/* @section =desktop
-------------------------------------------------------------------*/
@media only screen and (min-width: 600px) {
	body {margin: 0 auto;width:600px;}
}
</style>
<script>		
	(function (w, d){
		var
		nav = w.navigator,		
		gfxpath = 'assets/content/app/';
		pixelRatio = w.devicePixelRatio === 2 ? '@2x' : '',
		device = (/ipad/i).test(nav.platform) ? 'ipad' : (/iphone|ipod/i).test(nav.platform) ? 'iphone' : '',
		orient = (device == 'ipad' && w.orientation % 180) ? 'landscape' : 'portrait';
		if(device == 'iphone' && w.screen.height==568) {
			device = 'iphone5';
			d.querySelector("meta[name=viewport]").content="width=320.1"; 
		}
		if ( device === '' ) return;
		if ( device == 'iphone' || device == 'iphone5' || nav.standalone ) {
			d.write('<link rel="apple-touch-startup-image" href="' + gfxpath + 'startup-' + device + '-' + orient + pixelRatio + '.png"' + ( device == 'ipad' ? ' media="screen and (orientation:' + orient + ')"' : '' ) + '>');
		} else {
			d.write('<link rel="apple-touch-startup-image" href="' + gfxpath + 'startup-' + device + '-landscape' + pixelRatio + '.png" media="screen and (orientation:landscape)">');
			d.write('<link rel="apple-touch-startup-image" href="' + gfxpath + 'startup-' + device + '-portrait' + pixelRatio + '.png" media="screen and (orientation:portrait)">');
		}
	})(window, document);
</script>
</head>
<body>
<h1><img src="assets/content/logo_updownvienna.png" width="100" alt="" id="logo"> <br>Up Down Vienna</h1>
<p class="info">Aufzugsstörungen im Netz der Wiener Linien</p>
<ul class="skip"><li class="error"><a href="#stoerung">Störungen</a></li><li class="news"><a href="#wartung">Wartungen</a></li></ul>
<div id="container">
<ul class="list" id="stoerung"><li class="loading"><img src="assets/content/loader.gif" alt="" /></li></ul>
<ul class="list" id="wartung"></ul>
</div>
<p>Ein Projekt von <br /><a href="https://twitter.com/sindrewimberger" target="_blank">Sindre Wimberger</a> und <a href="https://twitter.com/grienauer" target="_blank">Nico Grienauer</a></p><p> Nach einer Idee von <a href="http://www.bizeps.or.at/" target="_blank">BIZEPS</a> und mit Unterstützung von <a href="http://www.open3.at/2013/09/up-down-vienna-aufzugsstoerungs-app-fuer-wien" target="_blank">open3</a></p>
<p>Datenquelle: <a href="https://open.wien.at/site/datensatz/?id=add66f20-d033-4eee-b9a0-47019828e698" target="_blank">Wiener Linien</a></p>
<script>
		var ds = document.createElement('script');ds.type = 'text/javascript';
		ds.src = 'json.php?func=trafficInfoList';
		var s = document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ds, s);
		var ds2 = document.createElement('script');ds2.type = 'text/javascript';
		ds2.src = 'json.php?func=newsList';
		s.parentNode.insertBefore(ds2, s);

		function cbfunc(json) {
			var html = '', list = [];
			if(json.data.trafficInfos) {
				list = json.data.trafficInfos;
			} else if (json.data.pois) {
				list = json.data.pois;				
			}
			for (var i = 0;i < list.length; i++) {
				var item = list[i], status = '', wartung = '', image='', linenr = 0, lines, imgname = '';
				if(item.refTrafficInfoCategoryId == 1 || item.refPoiCategoryId == -1) {
					if(item.refTrafficInfoCategoryId) {
//						status = '<img src="http://www.wienerlinien.at/css/img/status_rot_icon.png" alt="Aufzug derzeit außer Betrieb" class="status" />';
						statusClass = "error";
					} else if(item.refPoiCategoryId) {
//						status = '<img src="http://www.wienerlinien.at/css/img/status_gelb_icon.png" alt="Hinweis auf bevorstehende Wartung" class="status" />';
						statusClass = "news"					
						if(item.attributes.ausVon && item.attributes.ausBis) {
							wartung = '<br><em>'+item.attributes.ausVon+' - '+item.attributes.ausBis+'</em>';
						}							
					}
//					lines = item.attributes.relatedLines.split(',').sort();
					lines = item.attributes.relatedLines.sort();
					for (var l = 0;l < lines.length; l++) {
					 linenr++;			
					 imgname += lines[l];
					}				
					if(isNaN(imgname)) {	
						image +='<img src="assets/content/'+imgname+'.png" alt="'+imgname+'" class="linie linie'+linenr+'" />';
					} else {					
					 	 image +='<img src="assets/content/UStrab.png" alt="Starssenbahn" class="linie linie'+linenr+'" />';
					}
					html += '<li class="'+statusClass+' '+linenr+'" style="-webkit-animation-delay:' + i * 200 + 'ms; -moz-animation-delay:' + i * 200 + 'ms;-o-animation-delay:' + i * 200 + 'ms; animation-delay:' + i * 200 + 'ms;">'+status+''+image+'<strong>'+item.attributes.station+'</strong>, <br> '+item.attributes.location+wartung+'</li>';
				}
			}			
			if(item.refTrafficInfoCategoryId) {
				var el = document.getElementById('stoerung');
				el.innerHTML = html;
				el.className = el.className + " play";
			} else if(item.refPoiCategoryId) {
				var el = document.getElementById('wartung');
				el.innerHTML = html;
				el.className = el.className + " play";			
			}				

		}

	if((/iphone|ipod|ipad/gi).test(navigator.platform)) {
		if(window.navigator.standalone != true) {
			var addToHomeConfig = { // add to homescreen http://cubiq.org/add-to-home-screen 
				returningVisitor: true,	// Show the message only to returning visitors (ie: don't show it the first time)
				expire: 720, // Show the message only once every 12 hours
				touchIcon: true // displays the application icon next to the message
			};					
			var s = document.getElementsByTagName('head')[0];
			var ps = document.createElement('script');ps.type = 'text/javascript';
			ps.src = 'assets/add2home/add2home.js';
			var pc = document.createElement('link');pc.href = 'assets/add2home/add2home.css';pc.rel = 'stylesheet';pc.type = 'text/css';
			s.appendChild(pc);
			s.appendChild(ps);
		}		
	}

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-391732-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>
